<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gubby Clicker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; overflow-x: hidden; color: #1e293b; }
        
        @keyframes text-pop {
            0% { opacity: 0; transform: translate(0, 0) scale(0.5); }
            20% { opacity: 1; transform: translate(var(--pop-x), -40px) scale(1.3); }
            100% { opacity: 0; transform: translate(var(--pop-x), -120px) scale(1); }
        }
        @keyframes squish { 0% { transform: scale(1, 1); } 30% { transform: scale(1.2, 0.8); } 100% { transform: scale(1, 1); } }
        
        .animate-text-pop { animation: text-pop 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .animate-squish { animation: squish 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [clicks, setClicks] = useState(0);
            const [totalClicks, setTotalClicks] = useState(0);
            const [gold, setGold] = useState(0);
            const [activeBuff, setActiveBuff] = useState(null);
            const [inventory, setInventory] = useState({ 
                rainbow: 0, mega: 0, omega: 0, legendary: 0, mythic: 0, divine: 0, 
                celestial: 0, void: 0 
            });
            const [textParticles, setTextParticles] = useState([]);
            const [isSquishing, setIsSquishing] = useState(false);
            const [autoclickers, setAutoclickers] = useState(0);
            const [autoclickerCost, setAutoclickerCost] = useState(150);

            const gubbyImgUrl = "https://static.wikia.nocookie.net/parasprunki-fanon/images/1/1e/Gubby.webp";
            const goldCoinUrl = "https://cdn3d.iconscout.com/3d/premium/thumb/star-coin-3d-icon-png-download-11254734.png";
            const friendImgUrl = "https://static.vecteezy.com/system/resources/thumbnails/012/026/493/small/add-new-friend-user-group-icon-3d-render-png.png";

            const SHOP_ITEMS = [
                { id: 'rainbow', name: 'Rainbow', cost: 250, power: 10, duration: 15, img: 'https://cdn3d.iconscout.com/3d/premium/thumb/rainbow-3d-icon-png-download-4659629.png' },
                { id: 'mega', name: 'Mega', cost: 800, power: 25, duration: 12, img: 'https://static.vecteezy.com/system/resources/previews/018/842/628/non_2x/3d-star-icon-isolated-on-background-customer-rating-feedback-concept-3d-rendering-free-png.png' },
                { id: 'omega', name: 'Omega', cost: 2000, power: 120, duration: 10, img: 'https://cdn3d.iconscout.com/3d/premium/thumb/diamond-3d-icon-png-download-8249311.png' },
                { id: 'legendary', name: 'Legendary', cost: 15000, power: 1000, duration: 9, img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRq4n27KnKRQhJ1i15VvpRCuRtb9sBxjU48hA&s' },
                { id: 'mythic', name: 'Mythic', cost: 75000, power: 5000, duration: 9, img: 'https://cdn3d.iconscout.com/3d/premium/thumb/magic-wand-3d-icon-png-download-8249313.png' },
                { id: 'divine', name: 'Divine', cost: 250000, power: 25000, duration: 9, img: 'https://cdn3d.iconscout.com/3d/premium/thumb/compass-astrology-3d-icon-png-download-13124447.png' },
                { id: 'celestial', name: 'Celestial', cost: 1000000, power: 100000, duration: 8, img: 'https://cdn3d.iconscout.com/3d/premium/thumb/planets-3d-icon-png-download-11683976.png' },
                { id: 'void', name: 'Void', cost: 5000000, power: 500000, duration: 7, img: 'https://cdn3d.iconscout.com/3d/premium/thumb/space-station-3d-icon-png-download-6308159.png' }
            ];

            useEffect(() => {
                const interval = setInterval(() => {
                    if (autoclickers > 0) {
                        setClicks(prev => prev + autoclickers);
                        setTotalClicks(prev => prev + autoclickers);
                    }
                }, 1000);
                return () => clearInterval(interval);
            }, [autoclickers]);

            useEffect(() => {
                const interval = setInterval(() => {
                    if (activeBuff) {
                        setActiveBuff(prev => {
                            if (!prev || prev.timeLeft <= 1) return null;
                            return { ...prev, timeLeft: prev.timeLeft - 1 };
                        });
                    }
                }, 1000);
                return () => clearInterval(interval);
            }, [activeBuff]);

            const handleMainClick = (e) => {
                const power = activeBuff ? activeBuff.power : 1;
                
                setIsSquishing(true);
                setTimeout(() => setIsSquishing(false), 150);
                
                setClicks(prev => prev + power);
                setTotalClicks(prev => prev + power);
                
                const rect = e.currentTarget.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                spawnParticle(x, y, `+${Math.floor(power)}`, "text-black font-black");
            };

            const spawnParticle = (x, y, text, colorClass) => {
                const id = Date.now() + Math.random();
                setTextParticles(prev => [...prev, { id, x, y, popX: (Math.random() - 0.5) * 60, value: text, color: colorClass }]);
                setTimeout(() => setTextParticles(prev => prev.filter(p => p.id !== id)), 800);
            };

            const buyItem = (item) => {
                if (gold >= item.cost) {
                    setGold(prev => prev - item.cost);
                    setInventory(inv => ({ ...inv, [item.id]: inv[item.id] + 1 }));
                }
            };

            const useItem = (id) => {
                if (inventory[id] > 0 && !activeBuff) {
                    const item = SHOP_ITEMS.find(i => i.id === id);
                    setInventory(inv => ({ ...inv, [id]: inv[id] - 1 }));
                    setActiveBuff({ ...item, timeLeft: item.duration });
                }
            };

            return (
                <div className="min-h-screen flex flex-col items-center py-8 px-4">
                    <h1 className="text-4xl font-black uppercase tracking-tighter mb-8 text-slate-800">Gubby Clicker</h1>

                    {/* HUD */}
                    <div className="w-full max-w-4xl bg-white p-6 rounded-[2.5rem] shadow-xl border border-slate-200 flex items-center justify-between mb-8">
                        <div className="flex gap-10">
                            <div>
                                <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Clicks</p>
                                <p className="text-3xl font-black">{Math.floor(clicks).toLocaleString()}</p>
                            </div>
                            <div>
                                <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Total Clicks</p>
                                <p className="text-3xl font-black">{Math.floor(totalClicks).toLocaleString()}</p>
                            </div>
                            <div>
                                <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Gold</p>
                                <div className="flex items-center gap-2">
                                    <img src={goldCoinUrl} className="w-6 h-6"/>
                                    <p className="text-3xl font-black text-yellow-500">{gold.toLocaleString()}</p>
                                </div>
                            </div>
                        </div>
                        <button onClick={() => { setGold(g => g + clicks); setClicks(0); }} className="bg-black text-white px-10 py-4 rounded-2xl font-black uppercase text-xs hover:scale-105 active:scale-95 transition-all">Sell All Clicks</button>
                    </div>

                    {/* Click Area */}
                    <main className="relative flex flex-col items-center justify-center mb-12 h-64">
                        {activeBuff && <div className="absolute -top-12 bg-white border-2 border-black px-4 py-1.5 rounded-full font-black text-xs animate-bounce uppercase shadow-sm z-50">{activeBuff.name} ACTIVE: {activeBuff.timeLeft}s</div>}
                        <div className="relative">
                            <div className="absolute inset-0 pointer-events-none z-40">
                                {textParticles.map(p => (
                                    <span key={p.id} className={`absolute animate-text-pop ${p.color}`} style={{ left: `calc(50% + ${p.x}px)`, top: `calc(50% + ${p.y}px)`, '--pop-x': `${p.popX}px` }}>{p.value}</span>
                                ))}
                            </div>
                            
                            <button onClick={handleMainClick} className={`relative active:scale-90 transition-transform ${isSquishing ? 'animate-squish' : ''} z-20`}>
                                <img src={gubbyImgUrl} className="w-56 h-56 object-contain drop-shadow-2xl" />
                            </button>
                        </div>
                    </main>

                    {/* Grid Section */}
                    <div className="w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                        
                        {/* Marketplace */}
                        <section className="bg-white rounded-[3rem] p-8 shadow-2xl border border-slate-100">
                            <h2 className="text-xl font-black uppercase mb-6 tracking-tighter">Marketplace</h2>
                            <div className="grid grid-cols-4 gap-3">
                                <button onClick={() => { if(gold >= autoclickerCost) { setGold(g => g - autoclickerCost); setAutoclickers(a => a + 1); setAutoclickerCost(c => Math.floor(c * 1.5)); }}} className="p-3 bg-slate-50 rounded-2xl border-2 border-slate-100 hover:border-black transition-all flex flex-col items-center justify-between min-h-[120px]">
                                    <img src={friendImgUrl} className="w-8 h-8 object-contain"/>
                                    <span className="text-[8px] font-black uppercase text-center leading-tight mt-1">Friend</span>
                                    <span className="bg-black text-white w-full py-1 mt-1 rounded text-[7px] font-black text-center truncate px-1">{autoclickerCost.toLocaleString()}</span>
                                </button>
                                {SHOP_ITEMS.map(item => (
                                    <button key={item.id} onClick={() => buyItem(item)} className="p-3 bg-slate-50 rounded-2xl border-2 border-slate-100 hover:border-black transition-all flex flex-col items-center justify-between min-h-[120px]">
                                        <img src={item.img} className="w-8 h-8 object-contain"/>
                                        <span className="text-[8px] font-black uppercase text-center leading-tight mt-1">{item.name}</span>
                                        <span className="bg-black text-white w-full py-1 mt-1 rounded text-[7px] font-black text-center truncate px-1">{item.cost.toLocaleString()}</span>
                                    </button>
                                ))}
                            </div>
                        </section>

                        {/* Inventory */}
                        <section className="bg-white rounded-[3rem] p-8 shadow-2xl border border-slate-100">
                            <h2 className="text-xl font-black uppercase mb-6 tracking-tighter">Inventory</h2>
                            <div className="grid grid-cols-4 gap-3">
                                {SHOP_ITEMS.map(item => {
                                    const count = inventory[item.id];
                                    return (
                                        <button key={item.id} disabled={count === 0 || activeBuff} onClick={() => useItem(item.id)} className={`relative p-3 rounded-2xl border-2 flex flex-col items-center justify-center transition-all min-h-[120px] ${count > 0 ? 'bg-slate-50 border-slate-100 hover:border-black' : 'opacity-10 grayscale'}`}>
                                            <img src={item.img} className="w-10 h-10 object-contain mb-1"/>
                                            <span className="text-[8px] font-black uppercase text-center leading-tight">{item.name}</span>
                                            {count > 0 && <span className="absolute -top-1 -right-1 bg-black text-white text-[9px] w-6 h-6 rounded-full flex items-center justify-center border-4 border-white shadow-sm font-black">{count}</span>}
                                        </button>
                                    );
                                })}
                            </div>
                            {Object.values(inventory).every(v => v === 0) && (
                                <div className="h-24 flex items-center justify-center text-slate-300 uppercase font-black text-[10px] tracking-widest">Inventory Empty</div>
                            )}
                        </section>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
